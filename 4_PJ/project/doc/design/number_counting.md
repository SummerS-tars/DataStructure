# Data Structure Project 2: Numerical Design Spec

# 数值体系与平衡性设计说明书

## 1. 核心设计原则

1. **生存压力 (Survival Pressure)**: HP 是不可再生资源（除非喝药），必须让玩家在“战斗掉血”和“获得提升”之间做权衡。
2. **成长反馈 (Growth Feedback)**: 装备的提升必须显著。初期一件装备可能只加 2 点武力，后期一件神器可能加 50 点，这种跨度能带来爽快感。
3. 
**Boss 绝对压制**: 根据需求文档 ，Boss 必须是全图武力值最高的怪物。这意味着玩家如果不清空地图上的大部分资源，几乎不可能战胜 Boss。



---

## 2. 基础数值设定

### 2.1 玩家属性 (Player Stats)

* 
**初始武力值 (Base Power)**: `10` 


* 这是不可变的基数。


* **最大生命值 (Max HP)**: `100` (标准值)
* 设计考量：作为主要的消耗资源。


* **装备栏上限**: `5` 个槽位
* 这意味着玩家的理论最大武力值 = `10 + 5 * MaxItemPower`。



### 2.2 难度因子 (Difficulty Factor - )

难度因子直接乘在怪物的强度和掉落物的数值上。我们根据玩家当前的 **Total Power (TP)** 划分难度区间：

| 难度等级 | 推荐 TP 范围 | 难度因子 () | 怪物强度倍率 | 掉落品质倍率 | 描述 |
| --- | --- | --- | --- | --- | --- |
| **Easy** | 10 ~ 30 | **1.0** | 1.0x | 1.0x | 新手村，主要掉落 T1 装备 |
| **Normal** | 31 ~ 80 | **1.5** | 1.5x | 1.5x | 进阶挑战，掉落 T2 装备 |
| **Hard** | 81 ~ 150 | **2.0** | 2.2x | 2.0x | 高难区域，掉落 T3 装备 |
| **Abyss** | 151+ | **3.0** | 3.5x | 3.0x | 只有神装才能生存 |

---

## 3. 战斗公式 (Combat Formulas)

为了保持代码实现简单且逻辑清晰，我们采用 **“阈值减伤”** 模型。

### 3.1 战斗判定

设玩家当前总武力为 ，怪物武力为 。

1. **完全压制 (Perfect Kill)**:
* 条件: 
* 结果: **HP 消耗 = 0**。玩家毫发无损地获胜。


2. **殊死搏斗 (Struggle)**:
* 条件: 
* **基础伤害 (Base Damage)**: 
* **实受伤害 (Final Damage)**:



*解释：如果怪物比你强 10 点，你大概会掉 10~12 点血。这意味着满血（100 HP）状态下，你最多只能跨越 80~90 点左右的武力差进行战斗，否则会直接暴毙。*


3. **死亡判定 (Fatality)**:
* 如果 ，系统应在战斗前弹出警告：“这是一场自杀式的攻击，你确定要继续吗？”



---

## 4. 道具数值分级 (Item Tier System)

我们将道具分为 **4个阶梯 (Tiers)**，对应不同的游戏阶段。生成地图时，根据地图的平均难度概率生成对应阶梯的装备。

### 4.1 装备强度范围 (Power Bonus)

每个槽位（武器、头盔等）的数值范围大致相同，但为了趣味性，可以设定 **武器** 的波动范围更大。

| 阶梯 (Tier) | 名称前缀示例 | 单件武力加成 (Range) | 预估售价 (Value) | 出现场景 |
| --- | --- | --- | --- | --- |
| **Tier 1** | 破旧的 / 生锈的 | **+1 ~ +5** | 10 ~ 50 | Easy 地图 |
| **Tier 2** | 普通的 / 士兵的 | **+6 ~ +15** | 60 ~ 150 | Normal 地图 |
| **Tier 3** | 精良的 / 骑士的 | **+16 ~ +30** | 200 ~ 500 | Hard 地图 |
| **Tier 4** | 史诗的 / 龙骨的 | **+31 ~ +60** | 1000+ | Abyss / Boss掉落 |

* **设计验证**:
* 一身 T1 装备满配:  (可进入 Normal)
* 一身 T4 装备满配:  (神装)



### 4.2 消耗品数值

* **小生命药水**: 恢复 20 HP。
* **大生命药水**: 恢复 50 HP。
* *限制*: 为了防止无限刷血，药水在商店应该卖得很贵，或者在地图中非常稀有。

---

## 5. 地图生成数值模型 (Map Generation Stats)

这是算法生成部分的核心。我们需要保证怪物的强度随距离（从起点到该房间的步数）递增。

设：

*  = 当前难度因子
*  = 房间距离起点的步数 (BFS 距离)
*  = 随机波动值 (Random(-3, 3))

### 5.1 普通怪物 (Normal Monsters)

* **Easy 模式 ()**:
* 基准:  (等于玩家初始)
* 成长:  (每走一步怪强 2 点)
* *例子*: 第 10 步的怪物强度 。


* **Hard 模式 ()**:
* 基准: 
* 成长: 
* *例子*: 第 10 步的怪物强度 。



### 5.2 Boss 数值 (The Constraint)

必须保证 Boss 是全图最强 。
在地图生成完毕后，计算全图所有普通怪物的最大武力值 。

* *例子*: 如果地图深处最强的看门怪是 30，Boss 至少是 。玩家必须几乎拿满所有提升才能打过。

---

## 6. 交互与反馈设计建议

基于上述数值，前端展示可以做得很直观：

1. **危险度色标**:
* 当玩家看一个怪物时，根据  显示颜色框：
* 🟩 **绿色 (Safe)**:  (无伤碾压)
* 🟨 **黄色 (Risk)**:  (掉血但可战胜)
* 🟥 **红色 (Deadly)**:  (极高死亡风险)


2. **预测反馈**:
* 鼠标悬停在怪物身上，直接显示：“预计损失 HP: **12** (剩余 88)”。让玩家做明确的数学题，而不是猜谜。



这个数值体系既满足了 中关于初始值和道具类型的要求，又通过简单的线性公式保证了游戏在生成 20+ 个房间  时的难度曲线是平滑上升的。