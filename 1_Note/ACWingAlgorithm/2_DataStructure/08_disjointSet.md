# 并查集

并查集是一种树  

作用：  

1. 便于两个集合合并  
2. 便于查询两个元素是否在同一个集合中  

可以在近乎 $O(1)$ 的时间复杂度内完成以上操作  

## 1. 基本原理

采用树的形式维护所有的集合  
*不一定是二叉树*  

根节点：  
根节点编号即当前集合编号  

子节点：  
每个子节点存储父节点的编号  

我们就可以通过子节点找到父节点，从而找到根节点  
从而知道元素属于哪个集合  

### 1.1. 实现问题

Q1:  
如何判断节点是根节点  
`p[x] == x`  
*只有根节点满足此条件*  

Q2:  
如何寻找某节点的根节点  
`while(p[x] != x) x = p[x];`  
最后x的值就是这个元素所属的集合编号  

Q3:  
如何合并两个集合  
`p[find(a)] = find(b);`  
即直接将某个集合的根节点连到另一个集合的根节点上  

## 2. 优化

find函数中，我们每次都从当前节点向上寻找根节点，时间复杂度是 $O(n)$  
我们采取路径压缩的方式  
即在寻找根节点的过程中，将路径上的所有节点的父节点都设置为根节点  
最后实现接近 $O(1)$ 的时间复杂度  

补充：  
按秩合并：  
即在合并两个集合时，将节点数较少的集合合并到节点数较多的集合中  
此处不涉及  

## 3. 拓展

如果想要维护额外信息，例如每个集合中的元素个数  
我们可以通过操作中维护额外信息来实现  

概念：连通块  
例如维护每个集合中的元素个数，我们可以在合并集合时，将两个集合的元素个数相加  
